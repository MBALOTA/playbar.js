function getPosition(b){var e=0;var c=0;while(b){if(b.tagName=="BODY"){var d=b.scrollLeft||document.documentElement.scrollLeft;var a=b.scrollTop||document.documentElement.scrollTop;e+=(b.offsetLeft-d+b.clientLeft);c+=(b.offsetTop-a+b.clientTop)}else{e+=(b.offsetLeft-b.scrollLeft+b.clientLeft);c+=(b.offsetTop-b.scrollTop+b.clientTop)}b=b.offsetParent}return{x:e,y:c}}Number.prototype.clamp=function(b,a){return Math.min(Math.max(this,b),a)};function updateDOM(s){var j=document.querySelector(s.id);var m=getPosition(j);var n=document.querySelector(s.buttonId);var l=document.querySelector(s.progressId);var k;var g;if(s.showPreview){k=document.querySelector(s.previewId)}if(s.showLoaded){g=document.querySelector(s.loadedId)}var d=s.progress;if(s.showPreview&&s.previewProgress!==0&&s.moveButtonToPreview){d=s.previewProgress}if(s.barType==="horizontal"){var o=j.offsetWidth/100;var b=s.buttonOffset.x;var e=o*s.progress;var i=o*s.previewProgress;var c=o*s.loadedProgress;var f=j.offsetWidth;var a=j.offsetWidth-n.offsetWidth;var q=0;var p=(o*d);if(s.enableButtonOffset){p=p+(-n.offsetWidth-b);q+=b;a+=b+n.offsetWidth}else{p-=n.offsetWidth/2}l.style.width=e.clamp(0,f)+"px";n.style.left=p.clamp(q,a)+"px";if(s.previewProgress===0){i=0}if(s.showPreview){k.style.width=i.clamp(0,f)+"px"}if(s.showLoaded){g.style.width=c.clamp(0,f)+"px"}}else{if(s.barType==="vertical"){var h=j.offsetHeight/100;var b=s.buttonOffset.y;var e=h*s.progress;var i=h*s.previewProgress;var f=j.offsetHeight;var a=j.offsetHeight-n.offsetHeight;var q=0;var r=(h*d);if(s.enableButtonOffset){r=r+(-n.offsetHeight-b);q+=b;a+=b+n.offsetWidth}else{r-=n.offsetHeight/2}l.style.height=e.clamp(0,f)+"px";n.style.bottom=r.clamp(q,a)+"px";if(s.previewProgress===0){i=0}if(s.showPreview){k.style.height=i.clamp(0,f)+"px"}if(s.showLoaded){g.style.height=c.clamp(0,f)+"px"}}}}var playBar=function(c,a){var b={id:c,buttonId:"#pb-Button",progressId:"#pb-Progress",previewId:"#pb-ProgressPreview",loadedId:"#pb-ProgressLoaded",moveButtonToPreview:true,enableButtonOffset:false,buttonOffset:{x:0,y:0},barType:"horizontal",progress:0,previewProgress:0,loadedProgress:0,showPreview:false,showLoaded:false,setProgress:function(d){if(typeof d!=="number"){return}this.progress=d;updateDOM(this)},setPreviewProgress:function(d){if(typeof d!=="number"){return}this.previewProgress=d;updateDOM(this)},setLoadedProgress:function(d){if(typeof d!=="number"){return}this.loadedProgress=d;updateDOM(this)}};if(typeof a.buttonId!=="undefined"&&typeof a.buttonId==="string"){b.buttonId=a.buttonId}if(typeof a.progressId!=="undefined"&&typeof a.progressId==="string"){b.progressId=a.progressId}if(typeof a.previewId!=="undefined"&&typeof a.previewId==="string"){b.previewId=a.previewId}if(typeof a.loadedId!=="undefined"&&typeof a.loadedId==="string"){b.loadedId=a.loadedId}if(typeof a.moveButtonToPreview!=="undefined"&&typeof a.moveButtonToPreview==="boolean"){b.moveButtonToPreview=a.moveButtonToPreview}if(typeof a.enableButtonOffset!=="undefined"&&typeof a.enableButtonOffset==="boolean"){b.enableButtonOffset=a.enableButtonOffset}if(typeof a.buttonOffset!=="undefined"){b.buttonOffset=a.buttonOffset}if(typeof a.barType!=="undefined"){if(a.barType==="horizontal"){b.barType=a.barType}if(a.barType==="vertical"){b.barType=a.barType}if(a.barType!=="horizontal"&&a.barType!=="vertical"){console.error("New Playbar barType is defined wrong! Has to be 'horizontal' or 'vertical'!")}}if(typeof a.showPreview!=="undefined"&&typeof a.showPreview==="boolean"){b.showPreview=a.showPreview}if(typeof a.showLoaded!=="undefined"&&typeof a.showLoaded==="boolean"){b.showLoaded=a.showLoaded}return b};