function getPosition(b){var e=0;var c=0;while(b){if(b.tagName=="BODY"){var d=b.scrollLeft||document.documentElement.scrollLeft;var a=b.scrollTop||document.documentElement.scrollTop;e+=(b.offsetLeft-d+b.clientLeft);c+=(b.offsetTop-a+b.clientTop)}else{e+=(b.offsetLeft-b.scrollLeft+b.clientLeft);c+=(b.offsetTop-b.scrollTop+b.clientTop)}b=b.offsetParent}return{x:e,y:c}}Number.prototype.clamp=function(b,a){return Math.min(Math.max(this,b),a)};function updateDOM(f){var l=document.querySelector(f.id);var e=getPosition(l);var i=document.querySelector(f.buttonId);var m=document.querySelector(f.progressId);var h;if(f.showPreview){h=document.querySelector(f.previewId)}var k=f.progress;if(f.showPreview&&f.previewProgress!==0){k=f.previewProgress}if(f.barType==="horizontal"){var c=f.buttonOffset.x;var a=l.offsetWidth/100*f.progress;var j=l.offsetWidth/100*f.previewProgress;var b=l.offsetWidth;var o=l.offsetWidth-i.offsetWidth;var g=0;var d=(l.offsetWidth/100*k);if(f.enableButtonOffset){d=d+(-i.offsetWidth-c);g+=c;o+=c+i.offsetWidth}else{d-=i.offsetWidth/2}m.style.width=a.clamp(0,b)+"px";i.style.left=d.clamp(g,o)+"px";if(f.previewProgress===0){j=0}if(f.showPreview){h.style.width=j.clamp(0,b)+"px"}}else{if(f.barType==="vertical"){var c=f.buttonOffset.y;var a=l.offsetHeight/100*f.progress;var j=l.offsetHeight/100*f.previewProgress;var b=l.offsetHeight;var o=l.offsetHeight-i.offsetHeight;var g=0;var n=(l.offsetHeight/100*k);if(f.enableButtonOffset){n=n+(-i.offsetHeight-c);g+=c;o+=c+i.offsetWidth}else{n-=i.offsetHeight/2}m.style.height=a.clamp(0,b)+"px";i.style.bottom=n.clamp(g,o)+"px";if(f.previewProgress===0){j=0}if(f.showPreview){h.style.height=j.clamp(0,b)+"px"}}}}var playBar=function(c,a){var b={id:c,buttonId:"#playBarButton",progressId:"#playBarProgress",previewId:"#playBarProgressPreview",buttonOffset:{x:0,y:0},enableButtonOffset:false,barType:"horizontal",progress:0,previewProgress:0,showPreview:false,setProgress:function(d){if(typeof d==="number"){this.progress=d;updateDOM(this)}},setPreviewProgress:function(d){if(typeof d==="number"){this.previewProgress=d}updateDOM(this)}};if(typeof a.buttonId!=="undefined"&&typeof a.buttonId==="string"){b.buttonId=a.buttonId}if(typeof a.progressId!=="undefined"&&typeof a.progressId==="string"){b.progressId=a.progressId}if(typeof a.previewId!=="undefined"&&typeof a.previewId==="string"){b.previewId=a.previewId}if(typeof a.enableButtonOffset!=="undefined"&&typeof a.enableButtonOffset==="boolean"){b.enableButtonOffset=a.enableButtonOffset}if(typeof a.buttonOffset!=="undefined"){b.buttonOffset=a.buttonOffset}if(typeof a.barType!=="undefined"){if(a.barType==="horizontal"){b.barType=a.barType}if(a.barType==="vertical"){b.barType=a.barType}if(a.barType!=="horizontal"&&a.barType!=="vertical"){console.error("New Playbar barType is defined wrong! Has to be 'horizontal' or 'vertical'!")}}if(typeof a.showPreview!=="undefined"&&typeof a.showPreview==="boolean"){b.showPreview=a.showPreview}return b};exports.playBar=function(b,a){return playBar(b,a)};