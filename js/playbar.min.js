function getPosition(b){var e=0;var c=0;while(b){if(b.tagName=="BODY"){var d=b.scrollLeft||document.documentElement.scrollLeft;var a=b.scrollTop||document.documentElement.scrollTop;e+=(b.offsetLeft-d+b.clientLeft);c+=(b.offsetTop-a+b.clientTop)}else{e+=(b.offsetLeft-b.scrollLeft+b.clientLeft);c+=(b.offsetTop-b.scrollTop+b.clientTop)}b=b.offsetParent}return{x:e,y:c}}function updateDOM(d){var i=document.querySelector(d.id);var b=getPosition(i);var f=document.querySelector(d.buttonId);var j=document.querySelector(d.progressId);var e;if(d.showPreview){e=document.querySelector(d.previewId)}var h=d.progress;if(d.previewProgress!==0&&d.previewProgress!==d.progress){h=d.previewProgress}if(d.barType==="horizontal"){j.style.width=d.progress+"%";var c=i.offsetWidth/100*h+d.buttonOffset.x;var g=100/i.offsetWidth*c;f.style.left=g+"%";if(d.showPreview){e.style.width=d.previewProgress+"%"}}else{if(d.barType==="vertical"){j.style.height=d.progress+"%";var k=i.offsetHeight/100*h+d.buttonOffset.y;var a=100/i.offsetHeight*k;f.style.bottom=a+"%";if(d.showPreview){e.style.height=d.previewProgress+"%"}}}}var playBar=function(c,a){var b={id:c,buttonId:"#playBarButton",progressId:"#playBarProgress",previewId:"#playBarProgressPreview",buttonOffset:{x:0,y:0},barType:"horizontal",progress:0,previewProgress:0,showPreview:false,setProgress:function(d){if(typeof d==="number"){this.progress=d;updateDOM(this)}},setPreviewProgress:function(d){if(typeof d==="number"){this.previewProgress=d}updateDOM(this)}};if(typeof a.buttonId!=="undefined"&&typeof a.buttonId==="string"){b.buttonId=a.buttonId}if(typeof a.progressId!=="undefined"&&typeof a.progressId==="string"){b.progressId=a.progressId}if(typeof a.previewId!=="undefined"&&typeof a.previewId==="string"){b.previewId=a.previewId}if(typeof a.buttonOffset!=="undefined"){b.buttonOffset=a.buttonOffset}if(typeof a.barType!=="undefined"){if(a.barType==="horizontal"){b.barType=a.barType}if(a.barType==="vertical"){b.barType=a.barType}if(a.barType!=="horizontal"&&a.barType!=="vertical"){console.error("New Playbar barType is defined wrong! Has to be 'horizontal' or 'vertical'!")}}if(typeof a.showPreview!=="undefined"&&typeof a.showPreview==="boolean"){b.showPreview=a.showPreview}return b};